<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../webpage.xsl"?>

<webpage uri="modules.xml" root="..">
   <title>EXPath - HTTP Client</title>
   <section>
      <title>HTTP Client</title>
      <para>This module defines a set of functions to send HTTP requests and handle responses. This
         is a quite low-level functionality, allowing one to deal with most aspects of the HTTP
         protocol (redirections, headers, body contents, multipart...), while integrating smoothly
         within the <link href="http://www.w3.org/TR/xpath-datamodel/">XPath Data
         Model</link>.</para>
      <para>This module was written initially for EXSLT 2.0, but it is really an XPath extension,
         that makes sense to be used in XQuery as well, for instance. It is being moved to EXPath,
         but the <link href="http://www.fgeorges.org/exslt2/">legacy page</link> is still available.
         As this is the first EXPath module so far, any thought about how it should be released and
         about packaging would be much appreciated on the <link href="../lists.xml">mailing
            list</link>.</para>
   </section>
   <divider/>
   <primary>
      <title>Specification</title>
      <para>The specification for this module can be found <link href="http-client/http-client.xml"
            >here</link>.</para>
   </primary>
   <primary>
      <title>Introduction</title>
      <para>Besides the <link href="http-client/http-client.xml">specification</link>, here is an
         informal introduction to this module. See also the <link href="http-client/samples.xml"
            >samples page</link> for more elaborate samples. This module defines a single function,
            <code>http:send-request()</code> (with several arities for the sake of ease of use.) The
         function takes a description of the request in parameter, and returns a representation of
         the response.</para>
      <para>The request is represented by an <code>http:request</code> element, giving the URI, the
         HTTP method, the headers and the body content (for POST and PUT methods.) The response is
         returned as a sequence of one or more items. The first one is an <code>http:response</code>
         element with quite the same structure as an <code>http:request</code>, but without the
         content itself. The content is returned as the second item (or several items in case of a
         multipart response) as a string, a document node or a binary item, depending on the
            <code>Content-Type</code> returned by the server. Here is a simple example of call in
         XQuery, which sends a text content by POST:</para>
      <para>TODO: Write examples, etc.</para>
      <pre xmlns="http://www.w3.org/1999/xhtml">
http:send-request(
   &lt;http:request href="..." method="post">
      &lt;http:body>Hello, world!&lt;/http:body>
   &lt;/http:request>
)
</pre>
      <pre xmlns="http://www.w3.org/1999/xhtml">
<span class="xml-serial-keyword">let</span> <span class="xml-serial-variable-name">$me</span> := <span class="xml-serial-function-name">show-this</span>(<span class="xml-serial-string">"..."</span>)
  <span class="xml-serial-keyword">return</span>
    <span class="xml-serial-tag-delimiter">&lt;</span><span class="xml-serial-element-prefix">yo</span><span class="xml-serial-element-local-name">u</span><span class="xml-serial-tag-delimiter">&gt;</span> {
      <span class="xml-serial-variable-name">$me</span><span class="xml-serial-constant">/you</span>
    }
    <span class="xml-serial-tag-delimiter">&lt;</span><span class="xml-serial-tag-slash">/</span><span class="xml-serial-element-prefix">yo</span><span class="xml-serial-element-local-name">u</span><span class="xml-serial-tag-delimiter">&gt;</span>
      </pre>
   </primary>
</webpage>
